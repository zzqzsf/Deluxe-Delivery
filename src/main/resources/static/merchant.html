<!DOCTYPE html>
<html lang="en" xmlns:color="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>商家版</title>

    <!-- 引入 Bootstrap -->
    <link href="bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet">
    <link href="css/fileinput.css" rel="stylesheet" type="text/css">
    <link href="bootstrap-3.3.7-dist/css/bootstrap-theme.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/city-picker.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/star.css">
    <link rel="stylesheet" type="text/css" href="lib/sweet-alert.css">

<!--    <link rel="stylesheet" type="text/css" href="lib/sweet-alert.css">-->

    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="bootstrap-3.3.7-dist/js/bootstrap.js" type="text/javascript"></script>
    <script src="js/fileinput.js" type="text/javascript"></script>


    <script src="js/locales/zh.js" type="text/javascript"></script>
    <script src="js/vue.min.js" type="text/javascript"></script>
    <script src="js/bootstrap-paginator.js" type="text/javascript"></script>
    <script src="js/piexif.js" type="text/javascript"></script>
    <script src="lib/sweet-alert.js" type="text/javascript"></script>
    <script src="js/city-picker.data.js"></script>
    <script src="js/city-picker.js" type="text/javascript"></script>
<!--    <script src="lib/sweet-alert.js" type="text/javascript"></script>-->
    <!-- HTML5 Shiv 和 Respond.js 用于让 IE8 支持 HTML5元素和媒体查询 -->
    <!-- 注意： 如果通过 file://  引入 Respond.js 文件，则该文件无法起效果 -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
<!--    width 属性控制设备的宽度。假设您的网站将被带有不同屏幕分辨率的设备浏览，那么将它设置为 device-width 可以确保它能正确呈现在不同设备上。-->
<!--    initial-scale=1.0 确保网页加载时，以 1:1 的比例呈现，不会有任何的缩放-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="js/vue.min.js"></script>
    <style>
        .icon {
            /*background-image: url(/static/img/sprite/icons_559f3531_1.png);*/

            background-repeat: no-repeat;
            image-rendering:  crisp-edges;(-webkit-optimize-contrast);
            display: inline-block;
        }
        .i-ordernotok {
            width: 7px;
            height: 7px;
            border-radius: 50%;
            background-color: #ccc;
            /* background-position: -359px -284px; */
        }
        .i-orderok {
            width: 7px;
            height: 7px;
            background: #ffd161;
            border-radius: 50%;
            /* background-position: -290px -284px; */
        }
    </style>
    <script>
        $(function () {


            // var currentPage = 2;
            // var totalPages = 5;
            // $("#page").bootstrapPaginator({
            //     bootstrapMajorVersion: 3, //对应的bootstrap版本
            //     currentPage: currentPage, //当前页数
            //     numberOfPages: 10, //每次显示页数
            //     totalPages: totalPages, //总页数
            //     shouldShowPage: true, //是否显示该按钮
            //     useBootstrapTooltip: true,
            //     onPageClicked: function(event, originalEvent, type, page) {
            //
            //     },
            //
            // });

            /*
            根据订单编号查订单
            给订单、商品、评价加分页
            预订单提醒
            订单的操作（接单、送餐、完成）
            订单生命周期的记录 查询
            商品的编辑和添加
            评价星星
            商家资料修改
            图片上传、手机号验证
            ajax轮询redis查新订单
             */

            var shopId = 1;
            selectFoodtype(shopId);
            selectShopInfo(shopId);
            var vm = new Vue({
                el: "#all",
                data: {
                    foodtype: "",
                    food: "",
                    comments:"",
                    shopOrders:"",
                    shopInfo:"",
                },
                methods: {
                    //新订单
                    newOrder:function () {
                        var orderStatus="等待商家接单";
                        selectAllShopOrder(shopId,orderStatus);
                    },
                    //预计订单
                    expectOrder:function () {
                        selectAllShopOrder(shopId);
                    },
                    //已取消订单
                    cancelOrder:function () {
                        var orderStatus="已取消";
                        selectAllShopOrder(shopId,orderStatus);
                    },
                    //今日订单
                    todayOrder:function () {
                        $.ajax({
                            url:"/selectTodayOrder",
                            type:"post",
                            data:{
                                shopId:shopId,
                            },
                            dataType:"json",
                            success:function (data) {
                                vm.shopOrders=data;
                            }
                        })

                    },
                    //查询所有订单
                    allOrder:function () {
                        selectAllShopOrder(shopId);
                    },
                    //点击商品分类查商品
                    selectFoodByFty:function (index) {
                        var ftyId=this.foodtype[index].ftyId;
                        var activeChose=$("#foodTwoBar .active a").text();
                        selectAllFoodByFty(ftyId,activeChose);
                    },
                    //查询所有商品   分类   method方法间相互调用失败
                    allFood:function () {
                        var index=$("#foodThreeBar .active span").text();
                        this.$options.methods.selectFoodByFty(index);
                    },
                    //删除商品（因外键约束失败，修改商品状态为已删除）
                    deleteFood:function (index) {
                        var foodId=this.food[index].foodId;
                        swal({
                                title: "确定要删除该商品吗?",
                                text: "",
                                type: "warning",
                                showCancelButton: true,
                                confirmButtonColor: "#DD6B55",
                                confirmButtonText: "删除!",
                                cancelButtonText:"取消",
                                closeOnConfirm: false
                            },
                            function(isSure){
                                if(isSure){
                                    $.ajax({
                                        url:"/deleteFood",
                                        type:"post",
                                        data:{
                                            foodId:foodId,
                                        },
                                        dataType:"json",
                                        success:function (data) {
                                            swal("删除成功!", "该商品已被删除", "success");

                                        }
                                    })
                                }
                            });
                        this.food[index]="";

                    },
                    //更改商品状态 上架/下架
                    updateFood:function (index) {
                        var foodId=this.food[index].foodId;
                        var foodStatus=this.food[index].foodStatus=="上架"?"下架":"上架";
                        swal({
                                title: "确定要"+foodStatus+"该商品吗?",
                                text: "",
                                type: "warning",
                                showCancelButton: true,
                                confirmButtonColor: "#DD6B55",
                                confirmButtonText: foodStatus,
                                cancelButtonText:"取消",
                                closeOnConfirm: false
                            },
                            function(isSure){
                                if(isSure){
                                    $.ajax({
                                        url:"/updateFoodInfo",
                                        type:"post",
                                        data:{
                                            foodId:foodId,
                                            foodStatus:foodStatus,
                                        },
                                        dataType:"json",
                                        success:function (data) {
                                            swal(foodStatus+"成功!", "", "success");
                                        }
                                    })
                                }
                            });
                        this.food[index].foodStatus=foodStatus;
                    },
                    selectAllComment:function(){
                        selectAllComment(shopId);
                    },
                    selectGoodComment:function () {
                        $.ajax({
                            url:"/selectAllComment",
                            type:"post",
                            data:{
                                shopId:shopId,
                                comLevel:"好评"
                            },
                            dataType:"json",
                            success:function (data) {
                                vm.comments=data;
                            }
                        })
                    },
                    selectBadComment:function () {
                        $.ajax({
                            url:"/selectAllComment",
                            type:"post",
                            data:{
                                shopId:shopId,
                                comLevel:"差评"
                            },
                            dataType:"json",
                            success:function (data) {
                                vm.comments=data;
                            }
                        })
                    },
                    submitShopRsp:function (index) {
                        var comId=this.comments[index].comId;
                        $.ajax({
                            url:"/submitShopRsp",
                            type:"post",
                            data:{
                                comId:comId,
                                shopResponse:$("#shopRespone").val(),
                            },
                            dataType:"json",
                            success:function (data) {
                                vm.comments[index].shopResponse=$("#shopRespone").val();
                            }
                        })
                    }
                }
            });
            //添加商品分类
            $("#submitFoodtype").click(function () {
                swal({
                        title: "确定要添加商品分类吗?",
                        text: "",
                        type: "info",
                        showCancelButton: true,
                        confirmButtonColor: "#5BC0DE",
                        confirmButtonText: "添加",
                        cancelButtonText:"取消",
                        closeOnConfirm: false
                    },
                    function(isSure) {
                        if (isSure) {
                            $.ajax({
                                url: "/insertFoodtype",
                                type: "post",
                                data: {
                                    ftyName: $("#insertFoodSort").val(),
                                    shopId: "1",
                                },
                                dataType: "text",
                                success: function () {
                                    swal("添加成功!", "该商品分类已被添加", "success");
                                    selectFoodtype(shopId);
                                }
                            })
                        }
                    });

            });
            // $("#submitFood").click(function () {
            //     $.ajax({
            //         url:"/insertFood",
            //         type:"post",
            //         data:{
            //             shopId:shopId,
            //             foodName:$("#foodName").val(),
            //             foodPrice:$("#foodPrice").val(),
            //             foodStock:$("#foodStock").val(),
            //             foodIntro:$("#foodIntro").val(),
            //             ftyId:$("#foodSort option:selected").val(),
            //             foodStatus:"上架"
            //         },
            //         dataType:"json",
            //         success:function (data) {
            //             var foodId=data;
            //             uploadImg(foodId);
            //
            //         }
            //
            //
            //     })
            // });
            // $("#foodImg").fileinput({
            //     language:'zh',
            //     uploadUrl: '/uploadFoodImg',
            //     allowedFileExtensions : ['jpg', 'png','gif'],
            //     overwriteInitial: false,
            //     showRemove:true,
            //     maxFileSize: 100000,
            //     maxFileCount: 1,
            //     autoReplace: true,
            //     slugCallback: function(filename) {
            //         // swal("添加成功!", "你已成功添加"+$("#foodName").val()+"!", "success");
            //     }
            // });
            //上传商品图片
            $("#foodImg").fileinput({
                language:'zh',
                uploadUrl: "/uploadFoodImg",
                allowedFileExtensions : ['jpg', 'png','gif'],
                overwriteInitial: false,
                showRemove:true,
                maxFileSize: 100000,
                maxFileCount: 1,
                autoReplace:true,

                slugCallback: function(filename) {
                    return filename.replace('(', '_').replace(']', '_');
                }
            });
            //隐藏订单详情 （失效了）
            $("#orderItemInfo").hide();
            //点击切换  显示/隐藏 订单详情（失效了）
            $("#orderInfo").click(function () {
                $("#orderItemInfo").toggle()
            });
            //更新商品分类
            $("#updateFoodtype").click(function () {
                swal({
                        title: "确定要修改该商品分类吗?",
                        text: "",
                        type: "info",
                        showCancelButton: true,
                        confirmButtonColor: "#5CB85C",
                        confirmButtonText: "修改",
                        cancelButtonText:"取消",
                        closeOnConfirm: false
                    },
                    function(isSure) {
                        if (isSure) {
                            $.ajax({
                                url: "/updateFoodtype",
                                type: "post",
                                data: {
                                    ftyName: $("#newFoodSort").val(),
                                    ftyId: $('#updateSelectfoodSort option:selected').val(),
                                },
                                dataType: "text",
                                success: function () {
                                    swal("修改成功!", "该商品分类已被修改", "success");
                                    selectFoodtype(shopId);
                                }
                            })
                        }
                    });


            })
            //删除商品分类
            $("#deleteFoodtype").click(function () {
                swal({
                        title: "确定要删除该商品分类吗?",
                        text: "",
                        type: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#DD6B55",
                        confirmButtonText: "删除!",
                        cancelButtonText:"取消",
                        closeOnConfirm: false
                    },

                    function(isSure){
                        if(isSure){
                            $.ajax({
                                url: "/deleteFoodtype",
                                type: "post",
                                data: {
                                    foodtypeId:$('#deleteSelectFoodSort option:selected').val(),
                                },
                                dataType: "text",
                                success: function () {
                                    swal("删除成功!", "该商品分类已被删除", "success");
                                    selectFoodtype(shopId);
                                }
                            })

                        }
                    });


            })

            selectAllComment(shopId);
            selectAllShopOrder(shopId);

            //查询商品分类
            function selectFoodtype(shopId) {
                $.ajax({
                    url:"/selectFoodtype",
                    type:"post",
                    data:{
                        shopId:shopId,
                    },
                    dataType:"json",
                    success:function (data) {
                        vm.foodtype=data;
                    }
                })
            };
            //查询所有的评价
            function selectAllComment(shopId) {
                $.ajax({
                    url:"/selectAllComment",
                    type:"post",
                    data:{
                        shopId:shopId,
                    },
                    dataType:"json",
                    success:function (data) {
                        vm.comments=data;
                    }
                })
            }
            //查询所有订单
            function selectAllShopOrder(shopId,orderStatus) {
                $.ajax({
                    url:"/selectAllShopOrder",
                    type:"post",
                    data:{
                        shopId:shopId,
                        orderStatus:orderStatus,
                    },
                    dataType:"json",
                    success:function (data) {
                        vm.shopOrders=data;
                    }
                })
            };
            //查询店铺信息
            function selectShopInfo(shopId) {
                $.ajax({
                    url:"/selectShopInfo",
                    type:"post",
                    data:{
                        shopId:shopId,
                    },
                    dataType:"json",
                    success:function (data) {
                        vm.shopInfo=data;
                    }
                })

            }
            //根据分类查商品
            function selectAllFoodByFty(ftyId,activeChose) {

                switch (activeChose) {
                    case "全部商品":
                        $.ajax({
                            url:"/selectFoodByFoodtype",
                            type:"post",
                            data:{
                                foodtypeId:ftyId,
                            },
                            dataType:"json",
                            success:function (data) {
                                vm.food=data;
                            }
                        });
                        break;
                    case "库存不足":
                        $.ajax({
                            url:"/selectFoodByFoodtype",
                            type:"post",
                            data:{
                                foodtypeId:ftyId,
                                foodStock:1,
                            },
                            dataType:"json",
                            success:function (data) {
                                vm.food=data;
                            }
                        });

                        break;
                    case "已上架":
                        $.ajax({
                            url:"/selectFoodByFoodtype",
                            type:"post",
                            data:{
                                foodtypeId:ftyId,
                                foodStatus:"上架"
                            },
                            dataType:"json",
                            success:function (data) {
                                vm.food=data;
                            }
                        });
                        break;
                    case "已下架":
                        $.ajax({
                            url:"/selectFoodByFoodtype",
                            type:"post",
                            data:{
                                foodtypeId:ftyId,
                                foodStatus:"下架"
                            },
                            dataType:"json",
                            success:function (data) {
                                vm.food=data;
                            }
                        });
                        break;
                    default :
                        break;
                }
            }
        })
    </script>
</head>
<body>
<div class="container-fluid" id="all">
    <div class="row-fluid">
        <div class="col-md-12" style="height: 60px">
            <button class="btn btn-block btn-primary active btn-lg" type="button">这是一个logo</button>
        </div>
    </div>
    <div class="clearfix" style="margin-bottom: 10px;"></div><!-- 清除浮动 -->
    <div class="row-fluid">
        <div class="col-md-8">
            <div class="row">
                <div class="col-md-4">
                    <div class="col-md-7"><img src="image/reglogo.png" class="img-responsive" alt="Cinque Terre" style="float: left"></div>
                    <div class="col-md-4"><h3>商家版</h3></div>
                </div>
                <div class="col-md-2" style="overflow: hidden">
                    <h3>{{shopInfo.shopName}}</h3>
                </div>
                <div class="col-md-1"><h3>&nbsp;&nbsp;|</h3></div>
                <div class="col-md-4">
                    <h3>{{shopInfo.shopState}}</h3>
                </div>
            </div>
        </div>
        <div>
            <form class="bs-example bs-example-form" role="form">
                <div class="row">
                    <div class="col-md-4 " style="margin-top: 20px">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="订单编号">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button">搜索</button>
                            </span>
                        </div><!-- /input-group -->
                    </div><!-- /.col-lg-6 -->
                </div><!-- /.row -->
            </form>
        </div>
    </div>
    <div><ul class="nav nav-list"><li class="divider"></li></ul></div>
    <div class="row-fluid">
<!--        左侧主导航栏-->
        <div class="col-md-2">
            <ul class="nav nav-pills nav-stacked " id="myTab1">
                <li>&nbsp;</li><li>&nbsp;</li><li>&nbsp;</li>
                <li ><a href="#allOrder" data-toggle="tab">订单</a></li>
                <li class="divider"></li>
                <li><a href="#foodManage" data-toggle="tab">商品管理</a></li>
                <li class="divider"></li>
                <li><a href="#allComment" data-toggle="tab">评价</a></li>
                <li class="divider"></li>
                <li><a href="#allShopInfo" data-toggle="tab">商家资料</a></li>
            </ul>
        </div>
        <!--        右侧显示栏-->
<!--        一级导航栏-->
        <div class="col-md-10 tab-content position">
<!--            订单页-->
            <div class="tab-pane active" id="allOrder">
                <div class="row-fluid">
                    <div class="col-md-12">
                        <h3>订单</h3>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="col-md-12" style="height: 70px">
                        <ul class="nav nav-tabs">
                            <li class="active"><a data-toggle="tab" href="#orders" @click="newOrder()">新订单</a></li>
                            <li><a data-toggle="tab" href="#orders" @click="expectOrder()">预订单提醒</a></li>
                            <li><a data-toggle="tab" href="#orders" @click="cancelOrder()">取消单</a></li>
                            <li><a data-toggle="tab" href="#orders" @click="todayOrder()">今日订单</a></li>
                            <li><a data-toggle="tab" href="#orders" @click="allOrder()">全部订单</a></li>
                        </ul>
                    </div>
                    <div class="tab-content position" >
                        <div id="orders" class="tab-pane fade in active">
                            <ul class="list-inline nav nav-list">
                                <li class="col-md-6" style="padding-left: 30px">订单内容</li>
                                <li class="col-md-2">顾客电话</li>
                                <li class="col-md-2">支付金额</li>
                                <li class="col-md-2" style="padding: 0 30px">操作</li>
                            </ul>
                            <h5 class="page-header" style="margin-top: 20px"></h5>
                            <div v-for="(shopOrder,index) in shopOrders">
                                <div class="row" id="orderInfo" style="border: 2px solid #eeeeee;padding: 10px 0"  >

                                    <div class="col-md-6" style="padding: 0">
                                        <div class="col-md-1" style="padding: 0;margin-left: 40px">
                                            <img :src="shopOrder.custom.cusImg" class="img-responsive" alt="顾客头像">
                                        </div>
                                        <div class="col-md-10" style="padding: 0">
                                            <div class="row-fluid" >
                                                <span class="col-md-12" style="margin-bottom: 10px">{{shopOrder.custom.cusName}}</span>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <span class="col-md-3">{{shopOrder.orderTimeString}}</span>
                                                    <span class="col-md-7">订单号：<span>{{shopOrder.orderId}}</span></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-2" style="padding: 0">{{shopOrder.custom.cusTel}}</div>
                                    <div class="col-md-2" style="padding: 0">￥<span>{{shopOrder.gooSmoney}}</span></div>
                                    <div class="col-md-2" style="padding: 0">
                                        <div class="col-md-4" style="padding: 0"><button class="btn btn-primary">确认接单</button></div>
                                        <div class="col-md-4"><button class="btn btn-primary">拒接接单</button></div>
                                    </div>
                                </div>
                                <div class="row" id="orderItemInfo" style="border: 2px solid #bbbbbb;padding: 10px 0;">
                                    <div class="col-md-4" style="border-right: 1px solid #999999 ">
                                        <div style="float: left ;width: 95%;padding-left: 25px;overflow:hidden;">
                                            <div>
                                                <h4 style="color: #aaaaaa">订单详情</h4>
                                                <div>
                                                    <span class="col-md-7">牛肉粉丝汤+二两锅贴</span>
                                                    <span class="col-md-1">1</span>
                                                    <span class="col-md-2"><i>¥</i>42.00</span>
                                                </div>
                                                <div>
                                                    <span class="col-md-8" style="margin-top: 10px">包装费</span>
                                                    <span class="col-md-2" style="margin-top: 10px"><i>¥</i>{{shopOrder.shop.packagFee}}</span>
                                                </div>
                                                <div>
                                                    <span class="col-md-8" >配送费</span>
                                                    <span class="col-md-2" ><i>¥</i>1.50</span>
                                                </div>
                                                <div>
                                                    <span class="col-md-8" >优惠券</span>
                                                    <span class="col-md-2" style="padding-left: 10px"><h4 style="margin: 0;padding: 0;float: left">-</h4><i>¥</i>7.00</span>
                                                </div>
                                                <div style="clear:both;"></div>
                                                <hr style="border:1px dashed #987cb9; width:94%; color:#987cb9;margin: 15px 20px 10px 0px">
                                                <div class="col-md-7 pull-right" style="padding-left:20px;margin-top: 5px;font-size: large "><b>实际支付：¥</b><i>{{shopOrder.gooSmoney}}</i></div>
                                                <div style="clear:both;"></div>
                                                <div style="width:95%;height: 2px;background-color:#987cb9 ;margin-top: 5px"></div>
                                                <div style="color:#999999 ;padding-top: 10px">
                                                    <p>地址：<span>{{shopOrder.address.address}}</span></p>
                                                    <p>姓名：<span>{{shopOrder.address.addrName}}</span><span v-if="shopOrder.address.sex=='男士'">(先生)</span><span v-else>(女士)</span></p>
                                                    <p>电话：<span>{{shopOrder.address.addrTel}}</span></p>
                                                    <p>备注：<span v-if="shopOrder.orderNote!=null">{{shopOrder.orderNote}}</span><span v-else>(无)</span></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
<!--                                订单状态-->
                                    <div class="col-md-4">
                                    <div style="float: left ;width: 95%;padding-left: 25px;overflow:hidden;border-right: 0px solid #999999 ">
                                        <div>
                                            <h4 style="color:#aaaaaa">订单状态</h4>
                                            <div class="col-md-1" style="float: left">
                                                <i class="icon i-orderok"></i>
                                                <i style="display: block;height: 40px ;width: 1px;margin: 0 0px 0 3px; background-color: #ffd161"></i>
                                                <i class="icon i-ordernotok" style="border-radius: 50%"></i>
                                            </div>
                                            <div class="col-md-9">
                                                <div>
                                                    <span>订单提交成功</span>
                                                    <span class="pull-right">2019-09-08 12:00</span>
                                                </div>
                                                <div style="height: 40px"></div>
                                                <div>
                                                    <span>订单取消</span>
                                                    <span class="pull-right">2019-09-08 12:01</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                </div>
                            </div>
                            <div style="text-align:center;">
                                <ul id="page">
                                </ul>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
<!--            商品管理页-->
            <div class="tab-pane " id="foodManage">
                <div class="row-fluid">
                    <div class="col-md-12">
                        <h3>商品管理</h3>
                    </div>
                </div>
<!--                商品管理二级导航栏-->
                <div class="row-fluid">
                    <div class="col-md-12" style="height: 70px">
                        <ul class="nav nav-tabs" id="foodTwoBar">
                            <li class="active"><a data-toggle="tab" href="#allfoods" @click="allFood()">全部商品</a></li>
                            <li><a data-toggle="tab" href="#allfoods" @click="allFood()">库存不足</a></li>
                            <li><a data-toggle="tab" href="#allfoods" @click="allFood()">已上架</a></li>
                            <li><a data-toggle="tab" href="#allfoods" @click="allFood()">已下架</a></li>
                        </ul>
                    </div>
                    <div class="tab-content position" >
                        <div id="allfoods" class="tab-pane fade in active">
                            <div class="col-md-2">
<!--                                商品管理三级导航栏-->
                                <ul class="nav nav-pills nav-stacked" id="foodThreeBar">
                                    <li v-for="(foodtype,index) in foodtype" @click="selectFoodByFty(index)"><a data-toggle="tab" href="#foods">{{foodtype.ftyName}}</a><span class="hidden">{{index}}</span></li>


<!--                                添加商品分类按钮，insertFoodSortModel-->
                                    <li><button type="button" class="btn btn-info btn-circle" data-toggle="modal" data-target="#inserFoodSortModal" data-toggle="tooltip" data-placement="top" title="添加商品分类">
                                        <i class="glyphicon glyphicon-plus"></i></button>

<!--                                    修改商品分类 ，updateFoodSortModel-->
                                    <button type="button" class="btn btn-success btn-circle" data-toggle="modal" data-target="#updateFoodSortModal" data-toggle="tooltip" data-placement="top" title="修改商品分类">
                                        <i class="glyphicon glyphicon-edit"></i></button>

<!--                                    删除商品分类，deleteFoodSortModel-->
                                    <button type="button" class="btn btn-danger btn-circle" data-toggle="modal" data-target="#deleteFoodSortModal" data-toggle="tooltip" data-placement="top" title="删除商品分类">
                                        <i class="glyphicon glyphicon-remove"></i></button>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-10 tab-content position">
                                <div id="foods" class="tab-pane fade in active">
<!--                                    商品行-->
                                    <div class="row" style="height: 50px">
                                        <div class="col-md-1"></div>
                                        <div class="col-md-4" style="padding-left: 50px"><p>商品</p></div>
                                        <div class="col-md-2"><p>价格</p></div>
                                        <div class="col-md-2"><p>库存</p></div>
                                        <div class="col-md-3"><p>操作</p></div>
                                    </div>
                                    <h5 class="page-header" style="margin-top: 0"></h5>
<!--                                    商品详细数据-->
                                    <div class="row" style="height:70px ;border: 2px solid #eeeeee;padding: 10px 0" v-for="(food,index) in food">
                                        <div class="col-md-1"></div>
                                        <div class="col-md-4">
                                            <div class="col-md-3">
                                                <img :src="food.foodPath" class="img-responsive" alt="商品图片">
                                            </div>
                                            <div class="col-md-9">
                                                <div class="row">{{food.foodName}}</div>
                                                <div class="row">
                                                    <div class="col-md-4" style="padding: 0 5px 0 0"><label>月售：</label><span>{{food.foodMonSale}}</span></div>
                                                    <div class="col-md-4" style="padding: 0 5px 0 0"><label>好评：</label><span>100%</span></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2"><p>￥{{food.foodPrice}}</p></div>
                                        <div class="col-md-2"><p>{{food.foodStock}}</p></div>
                                        <div class="col-md-3">
                                            <div class="col-md-2" style="padding:0 5px 0 0"><a data-toggle="modal" data-target="#updateFoodModal" >编辑</a></div>
                                            <div class="col-md-2" style="padding:0 5px 0 0"><a id="foodStatus" @click="updateFood(index)">{{food.foodStatus}}</a></div>
                                            <div class="col-md-2" style="padding:0 5px 0 0"><a id="deleteFood" @click="deleteFood(index)">删除</a></div>
                                        </div>
                                    </div>
<!--                                    添加商品-->
                                    <div>
                                        <button type="button" class="btn btn-info btn-circle btn-xl" data-toggle="modal" data-target="#insertFoodModal" data-toggle="tooltip" data-placement="top" title="添加商品"
                                                style="position: relative; top:300px; left: 1000px; ">
                                            <i class="glyphicon glyphicon-plus"></i>
                                        </button>

                                        <!--                                        添加商品模态框-->
                                        <form class="form-horizontal" enctype="multipart/form-data" >
                                            <div class="modal fade" id="insertFoodModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                            <h4 class="modal-title" id="foodModalLabel">添加商品</h4>
                                                        </div>
                                                        <div class="modal-body">

                                                            <div class="form-group">
                                                                <label for="foodName" class="col-md-2 control-label">商品名</label>
                                                                <div class="col-md-10">
                                                                    <input type="text" class="form-control" id="foodName" placeholder="请输入商品名">
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="foodPrice" class="col-md-2 control-label">商品价格</label>
                                                                <div class="col-md-10">
                                                                    <input type="number" class="form-control" id="foodPrice" placeholder="请输入商品价格">
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="foodStock" class="col-md-2 control-label">商品库存</label>
                                                                <div class="col-md-10">
                                                                    <input type="number" class="form-control" id="foodStock" placeholder="请输入商品库存">
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="foodImg" class="col-md-2 control-label">商品图片</label>
                                                                <div class="col-md-10">
                                                                    <input type="file" id="foodImg" class="file-loading" name="foodImg" data-overwrite-initial="false" data-min-file-count="1">
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="foodIntro" class="col-md-2 control-label">商品简介</label>
                                                                <div class="col-md-10">
                                                                    <textarea class="form-control" rows="3" id="foodIntro" placeholder="请输入商品介绍"></textarea>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="foodSort" class="col-md-2 control-label">请选择商品分类</label>
                                                                <div class="col-md-10">
                                                                    <select class="form-control" id="foodSort" >
                                                                        <option value="foodtype.ftyId" v-for="(foodtype,index) in foodtype">{{foodtype.ftyName}}</option>
                                                                    </select>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                                            <button type="button" class="btn btn-primary" >提交</button>
<!--                                                            id="submitFood"-->
                                                        </div>
                                                    </div><!-- /.modal-content -->
                                                </div><!-- /.modal -->
                                            </div>
                                        </form>
                                    </div>
<!--                                    编辑商品-->
                                    <div>
<!--                                        修改商品模态框-->
                                        <form class="form-horizontal" enctype="multipart/form-data" >
                                            <div class="modal fade" id="updateFoodModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                                <div class="modal-dialog">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                                            <h4 class="modal-title" id="updatefoodModalLabel">修改商品</h4>
                                                        </div>
                                                        <div class="modal-body">
                                                                <div class="form-group">
                                                                    <label for="updateFoodName" class="col-md-2 control-label">商品名</label>
                                                                    <div class="col-md-10">
                                                                        <input type="text" class="form-control" id="updateFoodName" placeholder="请输入商品名" value="*****米饭******">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="updateFoodPrice" class="col-md-2 control-label">商品价格</label>
                                                                    <div class="col-md-10">
                                                                        <input type="number" class="form-control" id="updateFoodPrice" placeholder="请输入商品价格" value="2.00">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="updateFoodStock" class="col-md-2 control-label">商品库存</label>
                                                                    <div class="col-md-10">
                                                                        <input type="number" class="form-control" id="updateFoodStock" placeholder="请输入商品库存" value="9999">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="updateFoodImg" class="col-md-2 control-label">商品图片</label>
                                                                    <div class="col-md-10">
                                                                        <input type="file" id="updateFoodImg" class="file" name="updateFoodImg" data-overwrite-initial="false" data-min-file-count="1">
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="updateFoodIntro" class="col-md-2 control-label">商品简介</label>
                                                                    <div class="col-md-10">
                                                                        <textarea class="form-control" rows="3" id="updateFoodIntro" placeholder="请输入商品介绍">这是米饭</textarea>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <label for="updateFoodSort" class="col-md-2 control-label">请选择商品分类</label>
                                                                    <div class="col-md-10">
                                                                        <select class="form-control" id="updateFoodSort">
                                                                            <option value="foodtype.ftyId" v-for="(foodtype,index) in foodtype">{{foodtype.ftyName}}</option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                                                            <button type="button" class="btn btn-primary">提交</button>
                                                        </div>
                                                    </div><!-- /.modal-content -->
                                                </div><!-- /.modal -->
                                            </div>
                                        </form>

                                    </div>

                                </div>
<!--                                添加商品分类模态框-->
                                <div class="modal fade" id="inserFoodSortModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                    &times;
                                                </button>
                                                <h4 class="modal-title" id="myModalLabel">
                                                    添加商品分类
                                                </h4>
                                            </div>
                                            <div class="modal-body">
                                                <form class="form-horizontal">
                                                    <div class="form-group">
                                                        <label for="insertFoodSort" class="col-md-2 control-label">商品分类名称</label>
                                                        <div class="col-md-10">
                                                            <input type="text" id="insertFoodSort" class="form-control" placeholder="请输入商品分类名称">
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                                                </button>
                                                <button type="button" class="btn btn-primary" id="submitFoodtype">
                                                    提交
                                                </button>
                                            </div>
                                        </div><!-- /.modal-content -->
                                    </div><!-- /.modal -->
                                </div>
<!--                                编辑商品分类-->
                                <div class="modal fade" id="updateFoodSortModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                    &times;
                                                </button>
                                                <h4 class="modal-title" id="updataFoodSortModalLabel">
                                                    修改商品分类
                                                </h4>
                                            </div>
                                            <div class="modal-body">
                                                <form class="form-horizontal">
                                                    <div class="form-group">
                                                        <label for="updateSelectfoodSort" class="col-md-2 control-label">选择商品分类</label>
                                                        <div class="col-md-10">
                                                            <select class="form-control" id="updateSelectfoodSort">
                                                                <option :value="foodtype.ftyId" v-for="(foodtype,index) in foodtype">{{foodtype.ftyName}}</option>
                                                            </select>
                                                        </div>

                                                    </div>
                                                    <div class="form-group">
                                                        <label for="newFoodSort" class="col-md-2 control-label">输入新的商品分类名称</label>
                                                        <div class="col-md-10">
                                                            <input type="text" id="newFoodSort" class="form-control" placeholder="请输入新的商品分类名称">
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                                                </button>
                                                <button type="button" class="btn btn-primary" id="updateFoodtype">
                                                    修改
                                                </button>
                                            </div>
                                        </div><!-- /.modal-content -->
                                    </div><!-- /.modal -->
                                </div>
<!--                                删除商品分类-->
                                <div class="modal fade" id="deleteFoodSortModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                    <div class="modal-dialog">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                                    &times;
                                                </button>
                                                <h4 class="modal-title" id="deleteFoodSortModalLabel">
                                                    删除商品分类
                                                </h4>
                                            </div>
                                            <div class="modal-body">
                                                <form class="form-horizontal">
                                                    <div class="form-group">
                                                        <label for="deleteSelectFoodSort" class="col-md-2 control-label">选择商品分类</label>
                                                        <div class="col-md-10">
                                                            <select class="form-control" id="deleteSelectFoodSort">
                                                                <option :value="foodtype.ftyId" v-for="(foodtype,index) in foodtype">{{foodtype.ftyName}}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                                                </button>
                                                <button type="button" class="btn btn-primary" id="deleteFoodtype">
                                                    删除
                                                </button>
                                            </div>
                                        </div><!-- /.modal-content -->
                                    </div><!-- /.modal -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
<!--            评价页-->
            <div class="tab-pane" id="allComment">
                <div class="row-fluid">
                    <div class="col-md-12">
                        <h3>评价</h3>
                    </div>
                </div>
<!--                评价页面导航-->
                <div class="row-fluid">
                    <div class="col-md-12" style="height: 70px">
                        <ul class="nav nav-tabs">
                            <li class="active"><a data-toggle="tab" href="#comments" @click="selectAllComment()">全部评价</a></li>
                            <li><a data-toggle="tab" href="#comments" @click="selectGoodComment()">好评</a></li>
                            <li><a data-toggle="tab" href="#comments" @click="selectBadComment()">差评</a></li>
                        </ul>
                    </div>
<!--                具体评价-->
                    <div class="tab-content position" >
                        <div id="comments" class="tab-pane fade in active">
<!--                            把下面的框框顶下来-->
                            <p style="height: 110px"></p>
                            <div class="row" style="margin-left: 15px;border: 2px solid #eeeeee;padding: 10px 0" v-for="(comment,index) in comments">
                                <div>
                                <div class="col-md-1">
                                    <img :src="comment.custom.cusImg" class="img-responsive" alt="顾客头像">
                                </div>
                                <div class="col-md-11">
                                    <div class="row">
                                        <div class="col-md-1" style="line-height: 30px">{{comment.custom.cusName}}</div>
                                        <div class="star-rating col-md-2" style="margin: 0;padding: 0">
                                            <fieldset class="col-md-9" style="line-height: 30px">
                                                <input type="radio" id="star5" name="rating" value="5" /><label for="star5" title="Outstanding" >5 stars</label>
                                                <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="Very Good">4 stars</label>
                                                <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="Good">3 stars</label>
                                                <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="Poor">2 stars</label>
                                                <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="Very Poor">1 star</label>
                                            </fieldset>
                                            <span class="col-md-3" style="line-height: 30px" v-if="comment.comLevel>3">好评</span>
                                            <span class="col-md-3" style="line-height: 30px" v-else="comment.comLevel>3">差评</span>
                                        </div>
                                        <div class="col-md-2 pull-right" style="line-height: 30px">{{comment.comTimeString}}</div>
                                    </div>
                                    <div class="row" style="margin-top: 10px ; padding:0 30px 0 15px">
                                        {{comment.comText}}
                                    </div>
                                    <h5 class="page-header" style="margin-top: 15px"></h5>
                                    <div class="row">
                                        <from>
                                            <div class="form-group">
                                                <label for="shopRespone" class="col-md-1 control-label" style="color:#ffb700 ; padding:0 15px 0 15px">商家回复:</label>
                                                <div class="col-md-10">
                                                    <textarea class="form-control" rows="3" id="shopRespone" placeholder="请回复" v-if="comment.shopResponse==null"></textarea>
                                                    <button class="btn btn-default" v-if="comment.shopResponse==null" @click="submitShopRsp(index)">提交</button>
                                                    <span v-else>{{comment.shopResponse}}</span>
                                                </div>
                                            </div>
                                        </from>
                                    </div>
                                </div>
                            </div>
                            </div>
<!--                    评价信息分割线-->
                            <h5 class="page-header" style="margin-top: 20px"></h5>
                        </div>
                    </div>
                </div>
            </div>
<!--            商家信息页-->
            <div class="tab-pane" id="allShopInfo">
                <div class="row-fluid">
                    <div class="col-md-12">
                        <h3>商家信息</h3>
                    </div>
                </div>
<!--                商家信息导航-->
                <div class="row-fluid">
                    <div class="col-md-12" style="height: 70px">
                        <ul class="nav nav-tabs">
                            <li class="active"><a data-toggle="tab" href="#shopInfo">商家信息</a></li>
                            <li><a data-toggle="tab" href="#updateShopInfo">修改</a></li>
                        </ul>
                    </div>

                    <div class="tab-content position" >
                        <!--                    商家信息展示-->
                        <div id="shopInfo" class="tab-pane fade in active" style="margin-left: 15px">
                            <div><h4>商家具体信息</h4></div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                    <tr>
                                        <th class="col-md-2">属性</th>
                                        <th class="col-md-10">参数</th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td class="col-md-2">店铺名</td>
<!--                                        <td class="col-md-10">{{shopInfo.shopName}}&nbsp;&nbsp;&nbsp;<span class ="glyphicon glyphicon-edit"style ="color:#000000;"></span></td>-->
                                        <td class="col-md-10">

                                                <input type="text" class="form-control" id="updateShopName" placeholder="请输入店铺名称" value="尹正香麻辣香锅">

                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-2">店铺地址</td>
                                        <td class="col-md-10">{{shopInfo.shopAddr}}</td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-2">店铺联系电话</td>
                                        <td class="col-md-10">{{shopInfo.shopTel}}</td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-2">店铺状态</td>
                                        <td class="col-md-10">{{shopInfo.shopState}}</td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-2">店铺图片</td>
                                        <td class="col-md-10"><img :src="shopInfo.shopImg" alt="店铺图片"></td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-2">店铺评分</td>
                                        <td class="col-md-10">{{shopInfo.shopCom}}</td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-2">起送价</td>
                                        <td class="col-md-10">￥{{shopInfo.startPrice}}</td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-2">包装费</td>
                                        <td class="col-md-10">￥{{shopInfo.packagFee}}</td>
                                    </tr>
                                    <tr>
                                        <td class="col-md-2">月售</td>
                                        <td class="col-md-10">{{shopInfo.shopMonSale}}</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!--                    商家信息修改-->
                        <div id="updateShopInfo" class="tab-pane fade">
                            <form class="form-horizontal">
<!--                                店铺名-->
<!--                                <div class="form-group">-->
<!--                                    <label for="updateShopName" class="col-md-2 control-label">店铺名称</label>-->
<!--                                    <div class="col-md-10">-->
<!--                                        <input type="text" class="form-control" id="updateShopName" placeholder="请输入店铺名称" value="尹正香麻辣香锅">-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                店铺地址-->
                                <div class="form-group">
                                    <label for="updateShopAddr" class="col-md-2 control-label">店铺地址</label>
                                    <div style="position: relative" class="col-md-10">
                                        <!-- container -->
                                        <input readonly type="text" id="updateShopAddr" data-toggle="city-picker" placeholder="点击从下拉面板中选择省/市/区县/镇">
                                    </div>

                                </div>
<!--                                店铺联系电话-->
                                <div class="form-group">
                                    <label for="updateShopTel" class="col-md-2 control-label">店铺联系电话</label>
                                    <div class="col-md-10">
                                        <input type="text" class="form-control" id="updateShopTel" placeholder="请输入店铺联系电话" value="13255565835">
                                    </div>
                                </div>
<!--                                店铺图片-->
                                <div class="form-group">
                                    <label for="updateShopImg" class="col-md-2 control-label">店铺图片</label>
                                    <div class="col-md-10">
                                        <input type="file" id="updateShopImg" name="updateShopImg" class="file" data-overwrite-initial="false" data-min-file-count="1">
                                    </div>
                                </div>
<!--                                起送价-->
                                <div class="form-group">
                                    <label for="updateStartPrice" class="col-md-2 control-label">起送价</label>
                                    <div class="col-md-10">
                                        <input type="number" class="form-control" id="updateStartPrice" placeholder="请输入起送价" value="20.00"></input>
                                    </div>
                                </div>
<!--                                包装费-->
                                <div class="form-group">
                                    <label for="updatePackagFee" class="col-md-2 control-label">包装费</label>
                                    <div class="col-md-10">
                                        <input type="number" class="form-control" id="updatePackagFee" placeholder="请输入包装费" value="1.50"></input>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>